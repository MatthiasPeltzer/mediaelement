"use strict";(()=>{var n={isSDKStarted:!1,isSDKLoaded:!1,iframeQueue:[],enqueueIframe:e=>{n.isLoaded?n.createIframe(e):(n.loadIframeApi(),n.iframeQueue.push(e))},loadIframeApi:()=>{n.isSDKStarted||(mejs.Utils.loadScript("https://api.dmcdn.net/all.js"),n.isSDKStarted=!0)},apiReady:()=>{for(n.isLoaded=!0,n.isSDKLoaded=!0;n.iframeQueue.length>0;){let e=n.iframeQueue.pop();DM.init({apiKey:e.apiKey,status:e.status,cookie:e.cookie}),n.createIframe(e)}},createIframe:e=>{let u=DM.player(e.container,{height:e.height||"100%",width:e.width||"100%",video:e.videoId,params:Object.assign({api:!0},e.params),origin:location.host});u.addEventListener("apiready",()=>{window[`__ready__${e.id}`](u,{paused:!0,ended:!1})})},getDailyMotionId:e=>{let u=e.split("/");return u[u.length-1].split("_")[0]}},b={name:"dailymotion_iframe",options:{prefix:"dailymotion_iframe",dailymotion:{width:"100%",height:"100%",params:{autoplay:!1,chromeless:1,info:0,logo:0,related:0},apiKey:null,status:!0,cookie:!0}},canPlayType:e=>~["video/dailymotion","video/x-dailymotion"].indexOf(e.toLowerCase()),create:(e,u,g)=>{let a={},y=[],p,s=null,l=null,f=e.originalNode.muted;a.options=u,a.id=e.id+"_"+u.prefix,a.mediaElement=e;let j=mejs.html5media.properties,E=i=>{let d=`${i.substring(0,1).toUpperCase()}${i.substring(1)}`;a[`get${d}`]=()=>{if(s!==null){switch(i){case"currentTime":return s.currentTime;case"duration":return isNaN(s.duration)?0:s.duration;case"volume":return s.volume;case"paused":return s.paused;case"ended":return s.ended;case"muted":return f=s.muted,f;case"buffered":let h=s.bufferedTime,t=s.duration;return{start:()=>0,end:()=>h/t,length:1};case"src":return e.originalNode.getAttribute("src");case"readyState":return 4}return null}else return null},a[`set${d}`]=o=>{if(s!==null)switch(i){case"src":let h=typeof o=="string"?o:o[0].src;s.load(n.getDailyMotionId(h));break;case"currentTime":s.seek(o);break;case"muted":o===!0&&s.setVolume(0),s.setMuted(o),f=o,setTimeout(()=>{let r=mejs.Utils.createEvent("volumechange",a);e.dispatchEvent(r)},50);break;case"volume":s.setVolume(o),o===0&&!s.muted?(s.setMuted(!0),f=!0):o>0&&s.muted&&(s.setMuted(!1),f=!1),setTimeout(()=>{let r=mejs.Utils.createEvent("volumechange",a);e.dispatchEvent(r)},50);break;case"readyState":let t=mejs.Utils.createEvent("canplay",a);e.dispatchEvent(t);break;default:console.log("dm "+a.id,i,"UNSUPPORTED property");break}else y.push({type:"set",propName:i,value:o})}};for(let i=0,d=j.length;i<d;i++)E(j[i]);let U=mejs.html5media.methods,I=i=>{a[i]=()=>{if(s!==null)switch(i){case"play":return s.play();case"pause":return s.pause();case"load":return null}else y.push({type:"call",methodName:i})}};for(let i=0,d=U.length;i<d;i++)I(U[i]);window["__ready__"+a.id]=i=>{if(e.dmPlayer=s=i,y.length)for(let t=0,r=y.length;t<r;t++){let c=y[t];if(c.type==="set"){let w=c.propName,_=`${w.substring(0,1).toUpperCase()}${w.substring(1)}`;a[`set${_}`](c.value)}else c.type==="call"&&a[c.methodName]()}l=document.getElementById(a.id),p=["mouseover","mouseout"];let d=t=>{let r=mejs.Utils.createEvent(t.type,a);e.dispatchEvent(r)};for(let t=0,r=p.length;t<r;t++)l.addEventListener(p[t],d,!1);e.originalNode.muted?(s.setVolume(0),s.setMuted(!0)):(s.setVolume(s.volume),s.setMuted(!1)),p=mejs.html5media.events,p=p.concat(["click","mouseover","mouseout"]);let o=t=>{t!=="ended"&&s.addEventListener(t,r=>{let c=mejs.Utils.createEvent(r.type,a);e.dispatchEvent(c)})};for(let t=0,r=p.length;t<r;t++)o(p[t]);s.addEventListener("ad_start",()=>{let t=mejs.Utils.createEvent("play",a);e.dispatchEvent(t),t=mejs.Utils.createEvent("progress",a),e.dispatchEvent(t),t=mejs.Utils.createEvent("timeupdate",a),e.dispatchEvent(t)}),s.addEventListener("ad_timeupdate",()=>{let t=mejs.Utils.createEvent("timeupdate",a);e.dispatchEvent(t)}),s.addEventListener("ad_pause",()=>{let t=mejs.Utils.createEvent("pause",a);e.dispatchEvent(t)}),s.addEventListener("start",function(){if(s.muted){let t=mejs.Utils.createEvent("volumechange",a);e.dispatchEvent(t)}}),s.addEventListener("video_start",()=>{let t=mejs.Utils.createEvent("play",a);e.dispatchEvent(t);let r=mejs.Utils.createEvent("playing",a);e.dispatchEvent(r)}),s.addEventListener("ad_timeupdate",()=>{let t=mejs.Utils.createEvent("timeupdate",a);e.dispatchEvent(t)}),s.addEventListener("video_end",()=>{let t=mejs.Utils.createEvent("ended",a);e.dispatchEvent(t),e.originalNode.getAttribute("loop")&&s.play()});let h=["rendererready","loadedmetadata","loadeddata","canplay"];for(let t=0,r=h.length;t<r;t++){let c=mejs.Utils.createEvent(h[t],a,!0);e.dispatchEvent(c)}};let m=document.createElement("div");m.id=a.id,e.appendChild(m),e.originalNode&&(m.style.width=e.originalNode.style.width,m.style.height=e.originalNode.style.height),e.originalNode.style.display="none";let S=n.getDailyMotionId(g[0].src),v={id:a.id,container:m,videoId:S};return v.params=Object.assign({},a.options.dailymotion),v.params.controls=!!e.originalNode.controls,e.originalNode.autoplay&&(v.params.autoplay=!0),e.originalNode.muted&&(v.params.mute=!0),v.params.api="1",n.enqueueIframe(v),a.hide=()=>{a.pause(),l&&(l.style.display="none")},a.show=()=>{l&&(l.style.display="")},a.setSize=(i,d)=>{l&&(l.width=i,l.height=d)},a.destroy=()=>{s.destroy()},a}};mejs.Utils.typeChecks.push(e=>/\/\/((www\.)?dailymotion\.com|dai\.ly)/i.test(e)?"video/x-dailymotion":null);window.dmAsyncInit=()=>{n.apiReady()};mejs.Renderers.add(b);})();
