"use strict";(()=>{var f={promise:null,load:e=>{typeof Vimeo<"u"?f._createPlayer(e):(f.promise=f.promise||mejs.Utils.loadScript("https://player.vimeo.com/api/player.js"),f.promise.then(()=>{f._createPlayer(e)}))},_createPlayer:e=>{let b=new Vimeo.Player(e.iframe);window[`__ready__${e.id}`](b)},getVimeoId:e=>{if(e==null)return null;e=e.split("?")[0];let p=e.match(/https:\/\/player.vimeo.com\/video\/(\d+)$/);if(p)return parseInt(p[1],10);let d=e.match(/https:\/\/vimeo.com\/(\d+)$/);if(d)return parseInt(d[1],10);let t=e.match(/https:\/\/vimeo.com\/(\d+)\/\w+$/);return t?parseInt(t[1],10):NaN}},P={name:"vimeo_iframe",options:{prefix:"vimeo_iframe"},canPlayType:e=>~["video/vimeo","video/x-vimeo"].indexOf(e.toLowerCase()),create:(e,b,p)=>{let d=[],t={},y=!0,h=1,w=h,$=0,N=0,U=!1,v=0,o=null,V="";t.options=b,t.id=e.id+"_"+b.prefix,t.mediaElement=e;let l=a=>{e.generateError(`Code ${a.name}: ${a.message}`,p)},_=mejs.html5media.properties,E=a=>{let u=`${a.substring(0,1).toUpperCase()}${a.substring(1)}`;t[`get${u}`]=()=>{if(o!==null){switch(a){case"currentTime":return $;case"duration":return v;case"volume":return h;case"muted":return h===0;case"paused":return y;case"ended":return U;case"src":return o.getVideoUrl().then(m=>{V=m}).catch(m=>l(m)),V;case"buffered":return{start:()=>0,end:()=>N*v,length:1};case"readyState":return 4}return null}else return null},t[`set${u}`]=n=>{if(o!==null)switch(a){case"src":let m=typeof n=="string"?n:n[0].src,s=f.getVimeoId(m);o.loadVideo(s).then(()=>{e.originalNode.autoplay&&o.play()}).catch(r=>l(r));break;case"currentTime":o.setCurrentTime(n).then(()=>{$=n,setTimeout(()=>{let r=mejs.Utils.createEvent("timeupdate",t);e.dispatchEvent(r)},50)}).catch(r=>l(r));break;case"volume":o.setVolume(n).then(()=>{h=n,w=h,setTimeout(()=>{let r=mejs.Utils.createEvent("volumechange",t);e.dispatchEvent(r)},50)}).catch(r=>l(r));break;case"loop":o.setLoop(n).catch(r=>l(r));break;case"muted":n?o.setVolume(0).then(()=>{h=0,setTimeout(()=>{let r=mejs.Utils.createEvent("volumechange",t);e.dispatchEvent(r)},50)}).catch(r=>l(r)):o.setVolume(w).then(()=>{h=w,setTimeout(()=>{let r=mejs.Utils.createEvent("volumechange",t);e.dispatchEvent(r)},50)}).catch(r=>l(r));break;case"readyState":let i=mejs.Utils.createEvent("canplay",t);e.dispatchEvent(i);break;default:console.log("vimeo "+t.id,a,"UNSUPPORTED property");break}else d.push({type:"set",propName:a,value:n})}};for(let a=0,u=_.length;a<u;a++)E(_[a]);let A=mejs.html5media.methods,T=a=>{t[a]=()=>{if(o!==null)switch(a){case"play":return y=!1,o.play();case"pause":return y=!0,o.pause();case"load":return null}else d.push({type:"call",methodName:a})}};for(let a=0,u=A.length;a<u;a++)T(A[a]);window["__ready__"+t.id]=a=>{if(e.vimeoPlayer=o=a,d.length)for(let s=0,i=d.length;s<i;s++){let r=d[s];if(r.type==="set"){let j=r.propName,C=`${j.substring(0,1).toUpperCase()}${j.substring(1)}`;t[`set${C}`](r.value)}else r.type==="call"&&t[r.methodName]()}e.originalNode.muted&&(o.setVolume(0),h=0);let u=document.getElementById(t.id),n;n=["mouseover","mouseout"];let m=s=>{let i=mejs.Utils.createEvent(s.type,t);e.dispatchEvent(i)};for(let s=0,i=n.length;s<i;s++)u.addEventListener(n[s],m,!1);o.on("loaded",()=>{o.getDuration().then(s=>{if(v=s,v>0&&(N=v*s,e.originalNode.autoplay)){y=!1,U=!1;let i=mejs.Utils.createEvent("play",t);e.dispatchEvent(i)}}).catch(s=>{l(s,t)})}),o.on("progress",()=>{o.getDuration().then(s=>{if(v=s,v>0&&(N=v*s,e.originalNode.autoplay)){let r=mejs.Utils.createEvent("play",t);e.dispatchEvent(r);let j=mejs.Utils.createEvent("playing",t);e.dispatchEvent(j)}let i=mejs.Utils.createEvent("progress",t);e.dispatchEvent(i)}).catch(s=>l(s))}),o.on("timeupdate",()=>{o.getCurrentTime().then(s=>{$=s;let i=mejs.Utils.createEvent("timeupdate",t);e.dispatchEvent(i)}).catch(s=>l(s))}),o.on("play",()=>{y=!1,U=!1;let s=mejs.Utils.createEvent("play",t);e.dispatchEvent(s);let i=mejs.Utils.createEvent("playing",t);e.dispatchEvent(i)}),o.on("pause",()=>{y=!0,U=!1;let s=mejs.Utils.createEvent("pause",t);e.dispatchEvent(s)}),o.on("ended",()=>{y=!1,U=!0;let s=mejs.Utils.createEvent("ended",t);e.dispatchEvent(s)}),n=["rendererready","loadedmetadata","loadeddata","canplay"];for(let s=0,i=n.length;s<i;s++){let r=mejs.Utils.createEvent(n[s],t,!0);e.dispatchEvent(r)}};let I=e.originalNode.height,x=e.originalNode.width,c=document.createElement("iframe"),S=`https://player.vimeo.com/video/${f.getVimeoId(p[0].src)}`,g=~p[0].src.indexOf("?")?`?${p[0].src.slice(p[0].src.indexOf("?")+1)}`:"",k=[];return e.originalNode.autoplay&&g.indexOf("autoplay")===-1&&k.push("autoplay=1"),e.originalNode.loop&&g.indexOf("loop")===-1&&k.push("loop=1"),g=`${g}${g?"&":"?"}${k.join("&")}`,c.setAttribute("id",t.id),c.setAttribute("width",x),c.setAttribute("height",I),c.setAttribute("frameBorder","0"),c.setAttribute("src",`${S}${g}`),c.setAttribute("webkitallowfullscreen","true"),c.setAttribute("mozallowfullscreen","true"),c.setAttribute("allowfullscreen","true"),c.setAttribute("allow","autoplay"),e.originalNode.parentNode.insertBefore(c,e.originalNode),e.originalNode.style.display="none",f.load({iframe:c,id:t.id}),t.hide=()=>{t.pause(),o&&(c.style.display="none")},t.setSize=(a,u)=>{c.setAttribute("width",a),c.setAttribute("height",u)},t.show=()=>{o&&(c.style.display="")},t.destroy=()=>{},t}};mejs.Utils.typeChecks.push(e=>/(\/\/player\.vimeo|vimeo\.com)/i.test(e)?"video/x-vimeo":null);mejs.Renderers.add(P);})();
