"use strict";(()=>{var f={promise:null,load:t=>{typeof FB<"u"?f._createPlayer(t):(f.promise=f.promise||mejs.Utils.loadScript(`https://connect.facebook.net/${t.options.lang}/sdk.js`),f.promise.then(()=>{FB.init(t.options),setTimeout(()=>{f._createPlayer(t)},50)}))},_createPlayer:t=>{window[`__ready__${t.id}`]()}},C={name:"facebook",options:{prefix:"facebook",facebook:{appId:"",xfbml:!0,version:"v2.10",lang:"en_US"}},canPlayType:t=>~["video/facebook","video/x-facebook"].indexOf(t.toLowerCase()),create:(t,P,S)=>{let g=[],e={},w=!1,y=!0,h=!1,r=null,v="",k="",j=t.originalNode.autoplay;e.options=P,e.id=t.id+"_"+P.prefix,e.mediaElement=t,mejs.Features.isiPhone&&t.originalNode.getAttribute("poster")&&(k=t.originalNode.getAttribute("poster"),t.originalNode.removeAttribute("poster"));let B=mejs.html5media.properties,A=s=>{let n=`${s.substring(0,1).toUpperCase()}${s.substring(1)}`;e[`get${n}`]=()=>{if(r!==null){switch(s){case"currentTime":return r.getCurrentPosition();case"duration":return r.getDuration();case"volume":return r.getVolume();case"paused":return y;case"ended":return h;case"muted":return r.isMuted();case"buffered":return{start:()=>0,end:()=>0,length:1};case"src":return v;case"readyState":return 4}return null}else return null},e[`set${n}`]=o=>{if(r!==null)switch(s){case"src":let p=typeof o=="string"?o:o[0].src;v=p,a.remove(),a=document.createElement("div"),a.id=e.id,a.className="fb-video",a.setAttribute("data-href",p),a.setAttribute("data-allowfullscreen","true"),a.setAttribute("data-controls","false"),t.originalNode.parentNode.insertBefore(a,t.originalNode),t.originalNode.style.display="none",f.load({lang:e.options.lang,id:e.id}),FB.XFBML.parse(),j&&r.play();break;case"currentTime":r.seek(o);break;case"muted":o?r.mute():r.unmute(),setTimeout(()=>{let b=mejs.Utils.createEvent("volumechange",e);t.dispatchEvent(b)},50);break;case"volume":r.setVolume(o),setTimeout(()=>{let b=mejs.Utils.createEvent("volumechange",e);t.dispatchEvent(b)},50);break;case"readyState":let m=mejs.Utils.createEvent("canplay",e);t.dispatchEvent(m);break;default:console.log("facebook "+e.id,s,"UNSUPPORTED property");break}else g.push({type:"set",propName:s,value:o})}};for(let s=0,n=B.length;s<n;s++)A(B[s]);let U=mejs.html5media.methods,$=s=>{e[s]=()=>{if(r!==null)switch(s){case"play":return r.play();case"pause":return r.pause();case"load":return null}else g.push({type:"call",methodName:s})}};for(let s=0,n=U.length;s<n;s++)$(U[s]);function u(s){for(let n=0,o=s.length;n<o;n++){let p=mejs.Utils.createEvent(s[n],e,!0);t.dispatchEvent(p)}}window["__ready__"+e.id]=()=>{FB.Event.subscribe("xfbml.ready",s=>{if(s.type==="video"&&e.id===s.id){t.fbPlayer=r=s.instance;let n=document.getElementById(e.id),o=n.offsetWidth,p=n.offsetHeight,m=["mouseover","mouseout"],b=i=>{let c=mejs.Utils.createEvent(i.type,e);t.dispatchEvent(c)};e.setSize(o,p),t.originalNode.muted||r.unmute(),j&&r.play();for(let i=0,c=m.length;i<c;i++)n.addEventListener(m[i],b);e.eventHandler={};let _=["startedPlaying","paused","finishedPlaying","startedBuffering","finishedBuffering"];for(let i=0,c=_.length;i<c;i++){let l=_[i],d=e.eventHandler[l];d!=null&&!mejs.Utils.isObjectEmpty(d)&&typeof d.removeListener=="function"&&d.removeListener(l)}if(g.length)for(let i=0,c=g.length;i<c;i++){let l=g[i];if(l.type==="set"){let d=l.propName,x=`${d.substring(0,1).toUpperCase()}${d.substring(1)}`;e[`set${x}`](l.value)}else l.type==="call"&&e[l.methodName]()}u(["rendererready","loadeddata","canplay","progress","loadedmetadata","timeupdate"]);let N;e.eventHandler.startedPlaying=r.subscribe("startedPlaying",()=>{w||(w=!0),y=!1,h=!1,u(["play","playing","timeupdate"]),N=setInterval(()=>{r.getCurrentPosition(),u(["timeupdate"])},250)}),e.eventHandler.paused=r.subscribe("paused",()=>{y=!0,h=!1,u(["pause"])}),e.eventHandler.finishedPlaying=r.subscribe("finishedPlaying",()=>{y=!0,h=!0,u(["ended"]),clearInterval(N),N=null}),e.eventHandler.startedBuffering=r.subscribe("startedBuffering",()=>{u(["progress","timeupdate"])}),e.eventHandler.finishedBuffering=r.subscribe("finishedBuffering",()=>{u(["progress","timeupdate"])})}})},v=S[0].src;let a=document.createElement("div");return a.id=e.id,a.className="fb-video",a.setAttribute("data-href",v),a.setAttribute("data-allowfullscreen","true"),a.setAttribute("data-controls",!!t.originalNode.controls),t.originalNode.parentNode.insertBefore(a,t.originalNode),t.originalNode.style.display="none",f.load({options:e.options.facebook,id:e.id}),e.hide=()=>{e.pause(),r&&(a.style.display="none")},e.setSize=s=>{r!==null&&!isNaN(s)&&(a.style.width=s)},e.show=()=>{r&&(a.style.display="")},e.destroy=()=>{k&&t.originalNode.setAttribute("poster",k)},e}};mejs.Utils.typeChecks.push(t=>~t.toLowerCase().indexOf("//www.facebook")?"video/x-facebook":null);mejs.Renderers.add(C);})();
